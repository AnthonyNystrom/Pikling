#!/bin/bash
#
# Esegue il salvataggio del progetto pikling su pendrive
#

PROGETTO="Pikling"

# Cerco il nome del pendrive da cui fare il restore
DEVICE=`mount | grep nodev | grep -v journaled`
PERCORSO=${DEVICE#*"on "}
PERCORSO=${PERCORSO%" ("*}

echo "Backup $PROGETTO in $PERCORSO"

# Verifico l'esistenza della directory sorgente e destinazione
if [ ! -d "${PERCORSO}/SVN" ]; then echo "Directory ${PERCORSO}/SVN non trovata"; exit 1; fi
if [ ! -d ~/SVN/"${PROGETTO}" ]; then echo "Directory ~/SVN non trovata"; exit 1; fi

rsync -H -a --delete -v ~/SVN/"${PROGETTO}" "${PERCORSO}/SVN/"

exit 0
